<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Neuron WebAR</title>

<style>
html,body{margin:0;height:100%;background:#000;overflow:hidden;font-family:sans-serif}
#overlay{
position:fixed;inset:0;display:flex;flex-direction:column;
align-items:center;justify-content:center;background:rgba(0,0,0,.8);
color:#fff;z-index:10;text-align:center;padding:20px
}
button{padding:14px 20px;font-size:18px;border-radius:12px;border:none;background:#2b8cff;color:white}
#log{margin-top:10px;font-size:12px;opacity:.8;white-space:pre-wrap}
</style>

<!-- LOCAL FILES (NO CDN) -->
<script defer src="vendor/three.min.js"></script>
<script defer src="vendor/mindar-image-three.prod.js"></script>
</head>

<body>

<div id="overlay">
<h2>Neuron WebAR</h2>
Tap Start → allow camera → point at poster
<br><br>
<button id="start">Start AR</button>
<div id="log"></div>
</div>

<script>
const log=(t)=>document.getElementById("log").textContent+=t+"\n";

document.getElementById("start").onclick=async()=>{

try{
log("checking libs...");
log("THREE = "+!!window.THREE);
log("MINDAR = "+!!window.MINDAR);

if(!window.MINDAR){
throw "MindAR not loaded — vendor file missing or wrong path";
}

const mindarThree=new window.MINDAR.IMAGE.MindARThree({
container:document.body,
imageTargetSrc:"assets/targets.mind",
uiLoading:"no",
uiScanning:"yes"
});

const{renderer,scene,camera}=mindarThree;

scene.add(new THREE.AmbientLight(0xffffff,1));

const anchor=mindarThree.addAnchor(0);
const root=anchor.group;

/* test neuron */
const neuron=new THREE.Mesh(
new THREE.SphereGeometry(0.03,24,24),
new THREE.MeshStandardMaterial({color:0xffd54a,emissive:0xffd54a})
);
root.add(neuron);

log("starting camera...");
await mindarThree.start();

document.getElementById("overlay").style.display="none";

renderer.setAnimationLoop(()=>{
neuron.rotation.y+=0.02;
renderer.render(scene,camera);
});

}catch(e){
log("ERROR:");
log(e);
alert(e);
}

};
</script>

</body>
</html>
